<section>
  <div class="container track-order-container">
    <div class="track-container">
      <div style="font-weight: 700; font-size:17px; color:gray;">TRACK YOUR
        ORDER</div>
      <div class="track-order-box mt-2">
        <div class="row">
          <div class="col-md-6">
            {{#ifEquals orders.orderStage "CANCELLED"}}
              <p class="track-order-tag text-danger">{{orders.orderStage}}
                <br />
                {{orders.updatedAt}}</p>
            {{else}}
              {{#ifEquals orders.orderStage "RETURNED"}}
                <p class="track-order-tag text-warning">{{orders.orderStage}}
                  <br />
                  {{orders.updatedAt}}</p>
              {{else}}
                <p class="track-order-tag text-success">{{orders.orderStage}}
                  <br />
                  {{orders.updatedAt}}</p>
              {{/ifEquals}}
            {{/ifEquals}}
          </div>
          <div class="col-md-6">
            <div class="track-order-image float-end">
              <img
                style="width: 100%;"
                src="/uploads/{{arrayIndex orders.productInfo.images 0}}"
                alt=""
              />
            </div>
          </div>

        </div>
        <div class="my-3 border"></div>
        <div class="position-relative">
          <div class="progress" style="height: 300px;">

            <!-- Progress bar -->
            {{#ifEquals orders.orderStage "DISPATCHED"}}
              <div>
                <div
                  class="progress-bar progress-bar-striped bg-danger"
                  style="width: 100%; height: 25%;"
                  role="progressbar"
                  aria-label="Danger striped example"
                  aria-valuenow="100"
                  aria-valuemin="0"
                  aria-valuemax="100"
                >
                </div>
              </div>
            {{else}}
              {{#ifEquals orders.orderStage "ORDER SHIPPED"}}
                <div
                  class="progress-bar progress-bar-striped bg-danger"
                  style="width: 100%; height: 50%;"
                  role="progressbar"
                  aria-label="Danger striped example"
                  aria-valuenow="100"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              {{else}}
                {{#ifEquals orders.orderStage "OUT FOR DELIVERY"}}
                  <div
                    class="progress-bar progress-bar-striped bg-danger"
                    style="width: 100%; height: 75%;"
                    role="progressbar"
                    aria-label="Danger striped example"
                    aria-valuenow="100"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                {{else}}
                  {{#ifEquals orders.orderStage "DELIVERED"}}
                    <div
                      class="progress-bar progress-bar-striped bg-danger"
                      style="width: 100%; height: 100%;"
                      role="progressbar"
                      aria-label="Danger striped example"
                      aria-valuenow="100"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                    {{#ifEquals orders.orderStage "CANCELLED"}}
                      <div
                        class="progress-bar progress-bar-striped bg-danger"
                        style="width: 100%; height: 100%;"
                        role="progressbar"
                        aria-label="Danger striped example"
                        aria-valuenow="100"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    {{else}}
                      {{#ifEquals orders.orderStage "CANCELLATION REQUESTED"}}
                        <div
                          class="progress-bar progress-bar-striped bg-danger"
                          style="width: 100%; height: 0%;"
                          role="progressbar"
                          aria-label="Danger striped example"
                          aria-valuenow="100"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      {{else}}
                        {{#ifEquals orders.orderStage "CANCELLED"}}
                          <div
                            class="progress-bar progress-bar-striped bg-danger"
                            style="width: 100%; height: 0%;"
                            role="progressbar"
                            aria-label="Danger striped example"
                            aria-valuenow="100"
                            aria-valuemin="0"
                            aria-valuemax="100"
                          ></div>
                        {{else}}
                          {{#ifEquals orders.orderStage "RETURN REQUESTED"}}
                            <div
                              class="progress-bar progress-bar-striped bg-danger"
                              style="width: 100%; height: 0%;"
                              role="progressbar"
                              aria-label="Danger striped example"
                              aria-valuenow="100"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          {{else}}
                            {{#ifEquals orders.orderStage "RETURNED"}}
                              <div
                                class="progress-bar progress-bar-striped bg-danger mb-3"
                                style="width: 100%; height: 0%;"
                                role="progressbar"
                                aria-label="Danger striped example"
                                aria-valuenow="100"
                                aria-valuemin="0"
                                aria-valuemax="100"
                              ></div>
                            {{else}}
                              {{#ifEquals
                                orders.orderStage
                                "CANCELLLED DUE TO PAYMENT UNDONE"
                              }}
                                <div
                                  class="progress-bar progress-bar-striped bg-danger mb-3"
                                  style="width: 100%; height: 0%;"
                                  role="progressbar"
                                  aria-label="Danger striped example"
                                  aria-valuenow="100"
                                  aria-valuemin="0"
                                  aria-valuemax="100"
                                ></div>
                              {{/ifEquals}}
                            {{/ifEquals}}
                          {{/ifEquals}}
                        {{/ifEquals}}
                      {{/ifEquals}}
                    {{/ifEquals}}
                  {{/ifEquals}}
                {{/ifEquals}}
              {{/ifEquals}}
            {{/ifEquals}}

          </div>
          <div class="tick-mark" style="top: 0;  "><i
              class="fa-regular fa-square-check"
            ></i>
            <span class="ms-1 track-order-stage">DISPATCHED</span></div>
          <div class="tick-mark" style="top: 32%; "><i
              class="fa-regular fa-square-check"
            ></i>
            <span class="ms-1 track-order-stage">SHIPPED</span></div>
          <div class="tick-mark" style="top: 64%; "><i
              class="fa-regular fa-square-check"
            ></i>
            <span class="ms-1 track-order-stage">OUT FOR DELIVERY</span></div>
          <div class="tick-mark" style="top: 96%; "><i
              class="fa-regular fa-square-check"
            ></i>
            <span class="ms-1 track-order-stage">DELIVERED</span>
          </div>

        </div>

        <div class="my-4 border"></div>
        {{#ifEquals orders.orderStatus "CANCELLED"}}
          <button
            class="btn btn-danger mt-3 disabled"
            id="cancel-product-button"
          >CANCEL PRODUCT</button>

        {{/ifEquals}}
        {{#ifEquals orders.orderStatus "ACTIVE"}}
          {{#unlessEquals orders.orderStage "CANCELLATION REQUESTED"}}

            <button
              class="btn btn-danger mt-3"
              id="cancel-product-button"
              data-order-id="{{orders._id}}"
            >CANCEL PRODUCT</button>
          {{else}}
            <button
              class="btn btn-danger mt-3 disabled"
              id="cancel-product-button"
            >CANCEL PRODUCT</button>

          {{/unlessEquals}}
        {{/ifEquals}}
        {{#ifEquals orders.orderStatus "DELIVERED"}}
          {{#unlessEquals orders.orderStage "RETURN REQUESTED"}}
            <button
              class="btn btn-danger mt-3"
              id="return-product-button"
              data-order-id="{{orders._id}}"
            >RETURN PRODUCT</button>
          {{else}}
            <button
              class="btn btn-danger disabled mt-3"
              id="return-product-button"
              data-order-id="{{orders._id}}"
            >RETURN PRODUCT</button>
          {{/unlessEquals}}
        {{/ifEquals}}

      </div>
    </div>
  </div>
</section>